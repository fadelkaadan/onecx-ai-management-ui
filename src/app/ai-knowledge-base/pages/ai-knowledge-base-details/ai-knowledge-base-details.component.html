<ocx-portal-page
  permission="AI_KNOWLEDGE_BASE#VIEW"
  [helpArticleId]="'AI_KNOWLEDGE_BASE_DETAILS.HELP_ARTICLE_ID' | translate"
  *ngrxLet="viewModel$; let vm"
>
  <ocx-loading-indicator *ngIf="vm.detailsLoadingIndicator"> </ocx-loading-indicator>
  <ocx-data-loading-error *ngIf="!vm.detailsLoaded && !vm.detailsLoadingIndicator"> </ocx-data-loading-error>
  <div *ngIf="vm.detailsLoaded && !vm.detailsLoadingIndicator">
    <ocx-page-header
      [header]="'AI_KNOWLEDGE_BASE_DETAILS.HEADER' | translate"
      [subheader]="'AI_KNOWLEDGE_BASE_DETAILS.SUB_HEADER' | translate"
      [objectDetails]="(headerLabels$ | async) ?? []"
      [actions]="(headerActions$ | async) ?? []"
      [disableDefaultActions]="true"
      [manualBreadcrumbs]="true"
    >
    </ocx-page-header>
    <ocx-page-content>
      <div class="surface-section mt-3 mb-1 mx-3">
        <form [formGroup]="formGroup" errorTailor>
          <div class="mt-3 mb-1">
            <span class="p-float-label mb-1" controlErrorAnchor>
              <input pInputText type="text" id="id" class="w-full pt-3 pb-2 text-responsive" formControlName="id" />
              <label class="ocx-required-label" for="id"> {{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.ID' | translate }} </label>
            </span>
          </div>
          <div class="mt-3 mb-1">
            <span class="p-float-label mb-1" controlErrorAnchor>
              <input pInputText type="text" id="name" class="w-full pt-3 pb-2 text-responsive" formControlName="name" />
              <label class="ocx-required-label" for="name">
                {{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.NAME' | translate }}
              </label>
            </span>
          </div>
          <div class="mt-3 mb-1">
            <span class="p-float-label mb-1" controlErrorAnchor>
              <input
                id="description"
                pInputText
                type="text"
                class="w-full pt-3 pb-2 text-responsive"
                formControlName="description"
              />
              <label class="ocx-required-label" for="description">
                {{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.DESCRIPTION' | translate }}
              </label>
            </span>
          </div>
          <div class="mt-3 mb-1">
            <span class="p-float-label mb-1" controlErrorAnchor>
              <p-multiSelect
                [options]="(displayContexts$ | async) ?? []"
                formControlName="aiContext"
                id="aiContext"
                optionLabel="id"
                styleClass="w-full"
                [loading]="vm.contextsLoadingIndicator"
                ><ng-template let-item pTemplate="item">
                  <div class="flex flex-col text-sm">
                    <span class="font-semibold">
                      <span style="width: 40px"
                        >{{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.ID' | translate }}: {{ item.id }}</span
                      >
                      <span> &nbsp;|&nbsp; </span>
                    </span>
                    <span class="font-semibold">
                      <span style="width: 120px"
                        >{{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.NAME' | translate }}: {{ item.name }}</span
                      >
                      <span> &nbsp;|&nbsp; </span>
                    </span>

                    <span class="font-semibold">
                      {{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.DESCRIPTION' | translate }}: {{ item.description }}</span
                    >
                  </div>
                </ng-template>
              </p-multiSelect>
              <label class="ocx-required-label" for="aiContext">
                {{ 'AI_KNOWLEDGE_BASE_DETAILS.FORM.CONTEXTS' | translate }}
              </label>
            </span>
          </div>
        </form>
      </div>
    </ocx-page-content>
  </div>
</ocx-portal-page>
